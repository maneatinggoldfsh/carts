pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
function make_smoke(x,y,init_size,col)
 local s={}
 s.x=x
 s.y=y
 s.col=col
 s.width=init_size
 s.width_final=init_size+rnd(3)+1
 s.t=0
 s.max_t=30+rnd(10)
 s.dx=(rnd(.8)*0.4)
 s.dy=rnd(.5)
 s.ddy=.02
 add(smoke,s)
 return s
end

function move_smoke(s)
 if s.t>s.max_t then
  del(smoke,s)
 end
 
 if s.x>s.max_t-5 then
  s.width+=1
  s.width=min(s.width,s.width_final)
 end
 
 s.x+=s.dx
 s.y+=s.dy
 s.dy+=s.ddy
 s.t-=1
end

function draw_smoke(s)
 circfill(s.x,s.y,s.width,s.col)
end

function _update()
 foreach(smoke,move_smoke)
 if btn(0,0) then cursorx-=1 end
 if btn(1,0) then cursorx+=1 end
 if btn(2,0) then cursory-=1 end
 if btn(3,0) then cursory+=1 end
 if btn(4,0) then color=flr(rnd(16)) end
 make_smoke(cursorx,cursory,rnd(4),color)
end

function _draw()
 cls()
 map(0,0,0,0)
 foreach(smoke,draw_smoke)
end

function _init()
 smoke={}
 cursorx=50
 cursory=50
 color=7
end
__gfx__
00000000d99999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000244444490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700244444490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000244444490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000244444490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700244444490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000244444490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000002222222d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0001010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
