pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
function flood(x,y,col,pat)
 pat=pat or 0
 local oc=pget(x,y)
 if (oc==col) return
-- local queue={}
-- local add=mid(pat,0,1)
-- printh("add "..tostr(add))
 
 function fill2(x,y)
  if pget(x,y)==oc then
--   queue[#queue+add]=x*256+y
   pset(x,y,col)
   if (x>0) fill2(x-1,y)
   if (x<127) fill2(x+1,y)
   if (y>0) fill2(x,y-1)
   if (y<127) fill2(x,y+1)
  end
 end
 
 fill2(x,y)
 
 if pat>0 then
  printh("pat "..tostr(#queue))
  local poff=8+8*pat
  local q,a,b  
  for i=1,#queue do
   q=queue[i]
   a=flr(q/256)
   b=q-a*256
   local _x=poff+a%8
   local _y=b%8
   if (sget(poff+a%8,b%8)==0) pset(a,b,oc)
  end
 end
end

function _draw()
 cls()
 rect(10,10,80,80,8)
 flood(40,40,9)
 print(tostr(stat(1)),64,64,7)
end
__gfx__
00000000090000000900000009090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000909000009090000009090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700090000000900000009090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000009090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000009090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000900000009009090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000009090000090909090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000900000009009090909000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
