pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
function _init()
end

frame=0

hello_world_args={0,0,0}

function rpc_hello_world(args)
 for i,v in pairs(args) do
  hello_world_args[i]=v
 end
 return {5,6,7}
end

rpc_dispatch={}
rpc_dispatch[0]=rpc_hello_world

function _update()
 if peek(0x5f80)==0 then
  local type=peek(0x5f81)
  local len=peek(0x5f82)
  local args={}
  for i=1,len do
   args[i]=peek(0x5f82+i)
  end
  if rpc_dispatch[type]!=nil then
   local vals=rpc_dispatch[type](args)
   poke(0x5f81,#vals)
   for i,v in pairs(vals) do
    poke(0x5f81+i,v)
   end
   poke(0x5f80,2)
  end
 end
end

function _draw()
 frame+=1
 cls()
 rectfill(10,10,20,20,7)
 print(tostr(hello_world_args[1]),64,64,7)
 print(tostr(hello_world_args[2]),64,70,7)
 print(tostr(hello_world_args[3]),64,76,7)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000006660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
